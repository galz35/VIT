ğŸ“˜ PARTE 4.1 â€“ API REST NestJS (Endpoints por mÃ³dulo)

Estructura RESTful bajo prefijo /api, con validaciones globales, DTOs, y controladores desacoplados.

ğŸ” 4.1.1 â€“ AutenticaciÃ³n y SesiÃ³n

Prefix: /api/auth

MÃ©todo	Ruta	DescripciÃ³n
POST	/login	Devuelve token JWT + refresh
POST	/refresh	Genera nuevo JWT desde refresh token
GET	/me	Retorna perfil del usuario actual
POST	/logout	Invalida refresh token (opcional)
ğŸ‘¤ 4.1.2 â€“ Usuarios

Prefix: /api/usuarios

MÃ©todo	Ruta	DescripciÃ³n
GET	/	Lista de usuarios (admin/supervisor)
POST	/	Crear nuevo usuario
GET	/:id	Obtener un usuario
PUT	/:id	Editar datos
DELETE	/:id	Desactivar usuario
GET	/perfil	Info personal del usuario logueado
ğŸ¢ 4.1.3 â€“ Empresas

Prefix: /api/empresas

MÃ©todo	Ruta	DescripciÃ³n
GET	/	Lista de empresas
POST	/	Crear nueva empresa
GET	/:id	Ver empresa
PUT	/:id	Editar empresa
ğŸ“ 4.1.4 â€“ Clientes y Geocercas

Prefix: /api/clientes

MÃ©todo	Ruta	DescripciÃ³n
GET	/	Lista de clientes por empresa
POST	/	Crear cliente con geolocalizaciÃ³n
GET	/:id	Obtener detalle cliente
PUT	/:id	Editar
DELETE	/:id	Desactivar cliente
ğŸ“… 4.1.5 â€“ Actividades / Visitas

Prefix: /api/actividades

MÃ©todo	Ruta	DescripciÃ³n
GET	/pendientes	Listar prÃ³ximas tareas por usuario
POST	/asignar	Asignar actividad a usuario
GET	/historial/:idUsuario	Historial por usuario
POST	/checkin	Registrar llegada
POST	/checkout	Cierre y observaciÃ³n final
ğŸ§¾ 4.1.6 â€“ Formularios

Prefix: /api/formularios

MÃ©todo	Ruta	DescripciÃ³n
GET	/definiciones	Lista de formularios activos
POST	/guardar	Enviar respuestas (JSON + archivos)
GET	/respuestas/:idActividad	Ver respuesta de un formulario enviado
ğŸ“¡ 4.1.7 â€“ Tracking GPS

Prefix: /api/tracking

MÃ©todo	Ruta	DescripciÃ³n
POST	/punto	Registrar punto Ãºnico
POST	/batch	Registrar mÃºltiples puntos GPS (sync)
GET	/usuario/:idUsuario?fecha=yyyy-mm-dd	Ruta diaria para mapa admin
GET	/distancia/:idUsuario?fecha=	Total de kilÃ³metros por dÃ­a
ğŸš¨ 4.1.8 â€“ Alertas

Prefix: /api/alertas

MÃ©todo	Ruta	DescripciÃ³n
GET	/	Ver alertas activas
POST	/panico	Registrar botÃ³n de pÃ¡nico
POST	/geocerca	Registrar alerta por salida de zona
POST	/inactividad	Alerta automÃ¡tica backend
PUT	/atender/:id	Marcar alerta como atendida
ğŸ’¬ 4.1.9 â€“ Chat

Prefix: /api/chat

MÃ©todo	Ruta	DescripciÃ³n
GET	/usuarios	Lista conectada para chat
GET	/historial/:idUsuario	Historial con un usuario
POST	/enviar	Enviar mensaje (WS + persistencia)
â˜ï¸ 4.1.10 â€“ Archivos

Prefix: /api/archivos

MÃ©todo	Ruta	DescripciÃ³n
POST	/subir	Subida de adjunto (foto, firma)
GET	/:idArchivo	Descargar o previsualizar